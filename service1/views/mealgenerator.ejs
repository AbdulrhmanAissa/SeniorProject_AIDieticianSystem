<%- include("./partials/header.ejs") %>

<style>
    #loader {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background: #4154f1;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .cube-folding {
        width: 50px;
        height: 50px;
        display: inline-block;
        -webkit-transform: rotate(45deg);
        -moz-transform: rotate(45deg);
        transform: rotate(45deg);
        font-size: 0;
    }
    .cube-folding span {
        position: relative;
        width: 25px;
        height: 25px;
        -webkit-transform: scale(1.1);
        -moz-transform: scale(1.1);
        transform: scale(1.1);
        display: inline-block;
    }
    .cube-folding span::before {
        content: "";
        background-color: white;
        position: absolute;
        left: 0;
        top: 0;
        display: block;
        width: 25px;
        height: 25px;
        -moz-transform-origin: 100% 100%;
        -ms-transform-origin: 100% 100%;
        -webkit-transform-origin: 100% 100%;
        transform-origin: 100% 100%;
        -webkit-animation: folding 2.5s infinite linear both;
        -moz-animation: folding 2.5s infinite linear both;
        animation: folding 2.5s infinite linear both;
    }
    .cube-folding .leaf2 {
        -webkit-transform: rotateZ(90deg) scale(1.1);
        -moz-transform: rotateZ(90deg) scale(1.1);
        transform: rotateZ(90deg) scale(1.1);
    }
    .cube-folding .leaf2::before {
        -webkit-animation-delay: 0.3s;
        animation-delay: 0.3s;
        background-color: #f2f2f2;
    }
    .cube-folding .leaf3 {
        -webkit-transform: rotateZ(270deg) scale(1.1);
        -moz-transform: rotateZ(270deg) scale(1.1);
        transform: rotateZ(270deg) scale(1.1);
    }
    .cube-folding .leaf3::before {
        -webkit-animation-delay: 0.9s;
        animation-delay: 0.9s;
        background-color: #f2f2f2;
    }
    .cube-folding .leaf4 {
        -webkit-transform: rotateZ(180deg) scale(1.1);
        -moz-transform: rotateZ(180deg) scale(1.1);
        transform: rotateZ(180deg) scale(1.1);
    }
    .cube-folding .leaf4::before {
        -webkit-animation-delay: 0.6s;
        animation-delay: 0.6s;
        background-color: #e6e6e6;
    }

    @-webkit-keyframes folding {
        0%,
        10% {
            -webkit-transform: perspective(140px) rotateX(-180deg);
            -moz-transform: perspective(140px) rotateX(-180deg);
            transform: perspective(140px) rotateX(-180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
        25%,
        75% {
            -webkit-transform: perspective(140px) rotateX(0deg);
            -moz-transform: perspective(140px) rotateX(0deg);
            transform: perspective(140px) rotateX(0deg);
            -webkit-opacity: 1;
            -moz-opacity: 1;
            opacity: 1;
        }
        90%,
        100% {
            -webkit-transform: perspective(140px) rotateY(180deg);
            -moz-transform: perspective(140px) rotateY(180deg);
            transform: perspective(140px) rotateY(180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
    }
    @-moz-keyframes folding {
        0%,
        10% {
            -webkit-transform: perspective(140px) rotateX(-180deg);
            -moz-transform: perspective(140px) rotateX(-180deg);
            transform: perspective(140px) rotateX(-180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
        25%,
        75% {
            -webkit-transform: perspective(140px) rotateX(0deg);
            -moz-transform: perspective(140px) rotateX(0deg);
            transform: perspective(140px) rotateX(0deg);
            -webkit-opacity: 1;
            -moz-opacity: 1;
            opacity: 1;
        }
        90%,
        100% {
            -webkit-transform: perspective(140px) rotateY(180deg);
            -moz-transform: perspective(140px) rotateY(180deg);
            transform: perspective(140px) rotateY(180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
    }
    @-ms-keyframes folding {
        0%,
        10% {
            -webkit-transform: perspective(140px) rotateX(-180deg);
            -moz-transform: perspective(140px) rotateX(-180deg);
            transform: perspective(140px) rotateX(-180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
        25%,
        75% {
            -webkit-transform: perspective(140px) rotateX(0deg);
            -moz-transform: perspective(140px) rotateX(0deg);
            transform: perspective(140px) rotateX(0deg);
            -webkit-opacity: 1;
            -moz-opacity: 1;
            opacity: 1;
        }
        90%,
        100% {
            -webkit-transform: perspective(140px) rotateY(180deg);
            -moz-transform: perspective(140px) rotateY(180deg);
            transform: perspective(140px) rotateY(180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
    }
    @keyframes folding {
        0%,
        10% {
            -webkit-transform: perspective(140px) rotateX(-180deg);
            -moz-transform: perspective(140px) rotateX(-180deg);
            transform: perspective(140px) rotateX(-180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
        25%,
        75% {
            -webkit-transform: perspective(140px) rotateX(0deg);
            -moz-transform: perspective(140px) rotateX(0deg);
            transform: perspective(140px) rotateX(0deg);
            -webkit-opacity: 1;
            -moz-opacity: 1;
            opacity: 1;
        }
        90%,
        100% {
            -webkit-transform: perspective(140px) rotateY(180deg);
            -moz-transform: perspective(140px) rotateY(180deg);
            transform: perspective(140px) rotateY(180deg);
            -webkit-opacity: 0;
            -moz-opacity: 0;
            opacity: 0;
        }
    }
    </style>

<body class="d-flex flex-column vh-100">
    <%- include('./partials/navbar.ejs')%>

    <%- include('./partials/sidebar.ejs')%>

    <div id="loader">
        <h2 style="color: white;"><div id="factDisplay" style="text-align:center"></div></h2>
        <div class="cube-folding" style="margin-left: 50px;">
            <span class="leaf1"></span>
            <span class="leaf2"></span>
            <span class="leaf3"></span>
            <span class="leaf4"></span>
        </div> 
    </div>
        
    <main id="main" class="main">
        
        <div class="pagetitle">
        <h1>AI Meal Generator</h1>
        <nav>
            <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/Dashboard">Home</a></li>
            <li class="breadcrumb-item">Pages</li>
            <li class="breadcrumb-item active">AI Meal Generator</li>
            </ol>
        </nav>
        </div><!-- End Page Title -->
        
        <section class="section faq">
            
            <% if(user){ %>
                <div class="col-lg-12">
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">Welcome <%= user.name %></h5>

                        <p style="text-align: justify;">Sticking to a meal plan is a valuable commitment that can have a profound impact on your overall health 
                            and well-being. It serves as a roadmap for your daily nutritional intake, offering structure and 
                            predictability to your eating habits. When you meticulously plan your meals, you gain the advantage 
                            of being able to make informed choices about what you put into your body. This planning allows you 
                            to ensure that you are getting a balanced mix of essential nutrients, including carbohydrates, 
                            proteins, healthy fats, vitamins, and minerals, tailored to your specific dietary needs and goals.</p>

                        <p style="text-align: justify;">One of the most significant benefits of adhering to a meal plan is its role in effective weight management. 
                            By controlling portion sizes and calorie intake, you can better regulate your energy balance, which is 
                            crucial for achieving and maintaining a healthy weight. A well-thought-out meal plan can help you avoid 
                            overeating and reduce the likelihood of impulsive, less nutritious food choices, such as fast food or 
                            sugary snacks. This, in turn, can contribute to better weight control and may help prevent obesity-related 
                            health issues.</p>
                                
                        <p style="text-align: justify;">Furthermore, a meal plan can provide you with a sense of empowerment and control over your dietary choices. 
                            It encourages mindful eating, fostering a deeper connection with the food you consume. As you follow your 
                            plan, you become more attuned to the nutritional value of different foods, which can lead to improved 
                            food choices and a greater appreciation for the impact of your diet on your health.</p>
                                
                        <p style="text-align: justify;">Over time, sticking to a meal plan can transform into a sustainable and healthy eating routine. It establishes 
                            a consistent pattern of nourishment that becomes second nature, reducing the allure of unhealthy temptations. 
                            This consistency can be especially helpful in managing conditions like diabetes, where blood sugar control 
                            relies on a well-structured diet.</p>
                                
                        <p style="text-align: justify;">In summary, adhering to a meal plan is a powerful strategy for promoting a healthier lifestyle. It offers 
                            a structured approach to nutrition, aids in weight management, encourages mindful eating, and ultimately 
                            supports your long-term health and well-being. By committing to a well-balanced meal plan, you invest in 
                            your present and future health, ensuring that your dietary choices align with your health goals and aspirations.</p>

                             <h5 class="card-title" style="text-align: center;">AI Generated Meal Plan</h5>
                        <div class="d-grid gap-2 mt-3" id="buttonField">
                            <button id="button" class="btn btn-primary" style="width: 40%; justify-self: center;">Generate Meal Plan</button>
                        </div>
                      </div>
                    </div>
                </div>  
                <script>
                    const redirectButton = document.getElementById('button');
                    const ButtonField = document.getElementById("buttonField");

                    redirectButton.addEventListener('click', function() {
                        ButtonField.innerHTML = '<button class="btn btn-primary" style="width: 40%; justify-self: center;" type="button" disabled><span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>Loading...</button>';   
                        
                        //if you want to disable the function so you can adjust the front end just comment the next two lines.
                        const newPageUrl = '/mealplan'; 
                        window.location.href = newPageUrl;
                    });

                    //Loader Functions 
                    document.onreadystatechange = function () {
                        if (document.readyState !== "complete") {
                            document.querySelector(
                                "body").style.visibility = "hidden";
                            document.querySelector(
                                "#loader").style.visibility = "visible";
                        } else {
                            document.querySelector(
                                "#loader").style.display = "none";
                            document.querySelector(
                                "body").style.visibility = "visible";
                        }
                    };

                    (function newFact() {
                        var facts = ['Drinking at least five glasses of water a day can reduce your chances of suffering from a heart attack by 40%.', 
                        'Repeatedly using a plastic water bottle can release chemicals into your water. Why not try a reusable bottle instead? It’s good for you and the planet.', 
                        'Brushing teeth too soon after eating or drinking can soften the tooth enamel, especially if you’ve just been eating or drinking acidic foods.', 
                        'You dont actually breathe through both nostrils at the same time.', 
                        'Your body produces enough heat in 30 minutes to boil half a gallon of water.', 
                        'Most people produce enough saliva in their lifetimes to fill two swimming pools.', 
                        'Veins, which carry blood to the heart, have one-way valves that ensure blood flows in only one direction.', 
                        'According to a study from Harvard University, people who are always running late tend to be happier and live longer!',
                        'Your sensitivity to certain allergens may be connected to your birth weight.',
                        'The human heart delivers blood to the body through a superhighway of blood vessels.',
                        'Maintaining good relationships with your friends and family, reduces harmful levels of stress and boosts your immune system.'];
                        var randomFact = Math.floor(Math.random() * facts.length);
                        document.getElementById('factDisplay').innerHTML = facts[randomFact];
                    })();
                </script>
            <% }; %>
        </section>
    </main><!-- End #main -->
    <%- include('./partials/footer.ejs')%>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <%- include('./partials/js.ejs')%>
</body>

</html>